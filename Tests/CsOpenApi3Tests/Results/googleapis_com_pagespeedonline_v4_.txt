//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace MyNS
{
	using System;
	using System.Linq;
	using System.Collections.Generic;
	using System.Threading.Tasks;
	using System.Text.Json;
	using System.Text.Json.Serialization;
	using Fonlow.Net.Http;
	
	
	[System.Runtime.Serialization.DataContract(Namespace="http://fonlow.com/TestOpenApi/2024/04")]
	public class PagespeedApiFormatStringV4
	{
		
		/// <summary>
		/// List of arguments for the format string.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="args")]
		public PagespeedApiFormatStringV4Args[] PagespeedApiFormatStringV4Args { get; set; }
		
		/// <summary>
		/// A localized format string with {{FOO}} placeholders, where 'FOO' is the key of the argument whose value should be substituted. For HYPERLINK arguments, the format string will instead contain {{BEGIN_FOO}} and {{END_FOO}} for the argument with key 'FOO'.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="format")]
		public string Format { get; set; }
	}
	
	public class PagespeedApiFormatStringV4Args
	{
		
		/// <summary>
		/// The placeholder key for this arg, as a string.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="key")]
		public string Key { get; set; }
		
		/// <summary>
		/// The screen rectangles being referred to, with dimensions measured in CSS pixels. This is only ever used for SNAPSHOT_RECT arguments. If this is absent for a SNAPSHOT_RECT argument, it means that that argument refers to the entire snapshot.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="rects")]
		public PagespeedApiFormatStringV4ArgsRects[] PagespeedApiFormatStringV4ArgsRects { get; set; }
		
		/// <summary>
		/// Secondary screen rectangles being referred to, with dimensions measured in CSS pixels. This is only ever used for SNAPSHOT_RECT arguments.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="secondary_rects")]
		public PagespeedApiFormatStringV4ArgsSecondary_rects[] PagespeedApiFormatStringV4ArgsSecondary_rects { get; set; }
		
		/// <summary>
		/// Type of argument. One of URL, STRING_LITERAL, INT_LITERAL, BYTES, DURATION, VERBATIM_STRING, PERCENTAGE, HYPERLINK, or SNAPSHOT_RECT.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="type")]
		public string Type { get; set; }
		
		/// <summary>
		/// Argument value, as a localized string.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="value")]
		public string Value { get; set; }
	}
	
	public class PagespeedApiFormatStringV4ArgsRects
	{
		
		[System.Runtime.Serialization.DataMember(Name="height")]
		public System.Nullable<System.Int32> Height { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="left")]
		public System.Nullable<System.Int32> Left { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="top")]
		public System.Nullable<System.Int32> Top { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="width")]
		public System.Nullable<System.Int32> Width { get; set; }
	}
	
	public class PagespeedApiFormatStringV4ArgsSecondary_rects
	{
		
		[System.Runtime.Serialization.DataMember(Name="height")]
		public System.Nullable<System.Int32> Height { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="left")]
		public System.Nullable<System.Int32> Left { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="top")]
		public System.Nullable<System.Int32> Top { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="width")]
		public System.Nullable<System.Int32> Width { get; set; }
	}
	
	[System.Runtime.Serialization.DataContract(Namespace="http://fonlow.com/TestOpenApi/2024/04")]
	public class PagespeedApiImageV4
	{
		
		/// <summary>
		/// Image data base64 encoded.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="data")]
		public string Data { get; set; }
		
		/// <summary>
		/// Height of screenshot in pixels.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="height")]
		public System.Nullable<System.Int32> Height { get; set; }
		
		/// <summary>
		/// Unique string key, if any, identifying this image.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="key")]
		public string Key { get; set; }
		
		/// <summary>
		/// Mime type of image data (e.g. "image/jpeg").
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="mime_type")]
		public string Mime_type { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="page_rect")]
		public PagespeedApiImageV4Page_rect Page_rect { get; set; }
		
		/// <summary>
		/// Width of screenshot in pixels.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="width")]
		public System.Nullable<System.Int32> Width { get; set; }
	}
	
	public class PagespeedApiImageV4Page_rect
	{
		
		[System.Runtime.Serialization.DataMember(Name="height")]
		public System.Nullable<System.Int32> Height { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="left")]
		public System.Nullable<System.Int32> Left { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="top")]
		public System.Nullable<System.Int32> Top { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="width")]
		public System.Nullable<System.Int32> Width { get; set; }
	}
	
	[System.Runtime.Serialization.DataContract(Namespace="http://fonlow.com/TestOpenApi/2024/04")]
	public class PagespeedApiPagespeedResponseV4
	{
		
		/// <summary>
		/// The captcha verify result
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="captchaResult")]
		public string CaptchaResult { get; set; }
		
		/// <summary>
		/// Localized PageSpeed results. Contains a ruleResults entry for each PageSpeed rule instantiated and run by the server.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="formattedResults")]
		public PagespeedApiPagespeedResponseV4FormattedResults FormattedResults { get; set; }
		
		/// <summary>
		/// Canonicalized and final URL for the document, after following page redirects (if any).
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="id")]
		public string Id { get; set; }
		
		/// <summary>
		/// List of rules that were specified in the request, but which the server did not know how to instantiate.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="invalidRules")]
		public string[] InvalidRules { get; set; }
		
		/// <summary>
		/// Kind of result.
		/// </summary>
		[System.ComponentModel.DefaultValue("pagespeedonline#result")]
		[System.Runtime.Serialization.DataMember(Name="kind")]
		public string Kind { get; set; } = "pagespeedonline#result";
		
		/// <summary>
		/// Metrics of end users' page loading experience.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="loadingExperience")]
		public PagespeedApiPagespeedResponseV4LoadingExperience LoadingExperience { get; set; }
		
		/// <summary>
		/// Summary statistics for the page, such as number of JavaScript bytes, number of HTML bytes, etc.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="pageStats")]
		public PagespeedApiPagespeedResponseV4PageStats PageStats { get; set; }
		
		/// <summary>
		/// Response code for the document. 200 indicates a normal page load. 4xx/5xx indicates an error.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="responseCode")]
		public System.Nullable<System.Int32> ResponseCode { get; set; }
		
		/// <summary>
		/// A map with one entry for each rule group in these results.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="ruleGroups")]
		public System.Collections.Generic.Dictionary<string, PagespeedApiPagespeedResponseV4RuleGroups> RuleGroups { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="screenshot")]
		public PagespeedApiImageV4 Screenshot { get; set; }
		
		/// <summary>
		/// Additional base64-encoded screenshots of the page, in various partial render states.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="snapshots")]
		public PagespeedApiImageV4[] Snapshots { get; set; }
		
		/// <summary>
		/// Title of the page, as displayed in the browser's title bar.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="title")]
		public string Title { get; set; }
		
		/// <summary>
		/// The version of PageSpeed used to generate these results.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="version")]
		public PagespeedApiPagespeedResponseV4Version Version { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4FormattedResults
	{
		
		/// <summary>
		/// The locale of the formattedResults, e.g. "en_US".
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="locale")]
		public string Locale { get; set; }
		
		/// <summary>
		/// Dictionary of formatted rule results, with one entry for each PageSpeed rule instantiated and run by the server.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="ruleResults")]
		public System.Collections.Generic.Dictionary<string, PagespeedApiPagespeedResponseV4FormattedResultsRuleResults> RuleResults { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4FormattedResultsRuleResults
	{
		
		/// <summary>
		/// Whether this rule is in 'beta'. Rules in beta are new rules that are being tested, which do not impact the overall score.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="beta")]
		public System.Nullable<System.Boolean> Beta { get; set; }
		
		/// <summary>
		/// List of rule groups that this rule belongs to. Each entry in the list is one of "SPEED", "USABILITY", or "SECURITY".
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="groups")]
		public string[] Groups { get; set; }
		
		/// <summary>
		/// Localized name of the rule, intended for presentation to a user.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="localizedRuleName")]
		public string LocalizedRuleName { get; set; }
		
		/// <summary>
		/// The impact (unbounded floating point value) that implementing the suggestions for this rule would have on making the page faster. Impact is comparable between rules to determine which rule's suggestions would have a higher or lower impact on making a page faster. For instance, if enabling compression would save 1MB, while optimizing images would save 500kB, the enable compression rule would have 2x the impact of the image optimization rule, all other things being equal.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="ruleImpact")]
		public System.Nullable<System.Double> RuleImpact { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="summary")]
		public PagespeedApiFormatStringV4 Summary { get; set; }
		
		/// <summary>
		/// List of blocks of URLs. Each block may contain a heading and a list of URLs. Each URL may optionally include additional details.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="urlBlocks")]
		public PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocks[] PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocks { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocks
	{
		
		[System.Runtime.Serialization.DataMember(Name="header")]
		public PagespeedApiFormatStringV4 Header { get; set; }
		
		/// <summary>
		/// List of entries that provide information about URLs in the url block. Optional.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="urls")]
		public PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocksUrls[] PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocksUrls { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4FormattedResultsRuleResultsUrlBlocksUrls
	{
		
		/// <summary>
		/// List of entries that provide additional details about a single URL. Optional.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="details")]
		public PagespeedApiFormatStringV4[] Details { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="result")]
		public PagespeedApiFormatStringV4 Result { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4LoadingExperience
	{
		
		/// <summary>
		/// The url, pattern or origin which the metrics are on.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="id")]
		public string Id { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="initial_url")]
		public string Initial_url { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="metrics")]
		public System.Collections.Generic.Dictionary<string, PagespeedApiPagespeedResponseV4LoadingExperienceMetrics> Metrics { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="overall_category")]
		public string Overall_category { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4LoadingExperienceMetrics
	{
		
		[System.Runtime.Serialization.DataMember(Name="category")]
		public string Category { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="distributions")]
		public PagespeedApiPagespeedResponseV4LoadingExperienceMetricsDistributions[] PagespeedApiPagespeedResponseV4LoadingExperienceMetricsDistributions { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="median")]
		public System.Nullable<System.Int32> Median { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4LoadingExperienceMetricsDistributions
	{
		
		[System.Runtime.Serialization.DataMember(Name="max")]
		public System.Nullable<System.Int32> Max { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="min")]
		public System.Nullable<System.Int32> Min { get; set; }
		
		[System.Runtime.Serialization.DataMember(Name="proportion")]
		public System.Nullable<System.Double> Proportion { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4PageStats
	{
		
		/// <summary>
		/// Content management system (CMS) used for the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="cms")]
		public string Cms { get; set; }
		
		/// <summary>
		/// Number of uncompressed response bytes for CSS resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="cssResponseBytes")]
		public string CssResponseBytes { get; set; }
		
		/// <summary>
		/// Number of response bytes for flash resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="flashResponseBytes")]
		public string FlashResponseBytes { get; set; }
		
		/// <summary>
		/// Number of uncompressed response bytes for the main HTML document and all iframes on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="htmlResponseBytes")]
		public string HtmlResponseBytes { get; set; }
		
		/// <summary>
		/// Number of response bytes for image resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="imageResponseBytes")]
		public string ImageResponseBytes { get; set; }
		
		/// <summary>
		/// Number of uncompressed response bytes for JS resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="javascriptResponseBytes")]
		public string JavascriptResponseBytes { get; set; }
		
		/// <summary>
		/// The needed round trips to load render blocking resources
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numRenderBlockingRoundTrips")]
		public System.Nullable<System.Int32> NumRenderBlockingRoundTrips { get; set; }
		
		/// <summary>
		/// The needed round trips to load the full page
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numTotalRoundTrips")]
		public System.Nullable<System.Int32> NumTotalRoundTrips { get; set; }
		
		/// <summary>
		/// Number of CSS resources referenced by the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberCssResources")]
		public System.Nullable<System.Int32> NumberCssResources { get; set; }
		
		/// <summary>
		/// Number of unique hosts referenced by the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberHosts")]
		public System.Nullable<System.Int32> NumberHosts { get; set; }
		
		/// <summary>
		/// Number of JavaScript resources referenced by the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberJsResources")]
		public System.Nullable<System.Int32> NumberJsResources { get; set; }
		
		/// <summary>
		/// Number of HTTP resources loaded by the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberResources")]
		public System.Nullable<System.Int32> NumberResources { get; set; }
		
		/// <summary>
		/// Number of roboted resources.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberRobotedResources")]
		public System.Nullable<System.Int32> NumberRobotedResources { get; set; }
		
		/// <summary>
		/// Number of static (i.e. cacheable) resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberStaticResources")]
		public System.Nullable<System.Int32> NumberStaticResources { get; set; }
		
		/// <summary>
		/// Number of transient-failed resources.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="numberTransientFetchFailureResources")]
		public System.Nullable<System.Int32> NumberTransientFetchFailureResources { get; set; }
		
		/// <summary>
		/// Number of response bytes for other resources on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="otherResponseBytes")]
		public string OtherResponseBytes { get; set; }
		
		/// <summary>
		/// Number of over-the-wire bytes, uses the default gzip compression strategy as an estimation.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="overTheWireResponseBytes")]
		public string OverTheWireResponseBytes { get; set; }
		
		/// <summary>
		/// List of roboted urls.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="robotedUrls")]
		public string[] RobotedUrls { get; set; }
		
		/// <summary>
		/// Number of uncompressed response bytes for text resources not covered by other statistics (i.e non-HTML, non-script, non-CSS resources) on the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="textResponseBytes")]
		public string TextResponseBytes { get; set; }
		
		/// <summary>
		/// Total size of all request bytes sent by the page.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="totalRequestBytes")]
		public string TotalRequestBytes { get; set; }
		
		/// <summary>
		/// List of transient fetch failure urls.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="transientFetchFailureUrls")]
		public string[] TransientFetchFailureUrls { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4RuleGroups
	{
		
		[System.Runtime.Serialization.DataMember(Name="pass")]
		public System.Nullable<System.Boolean> Pass { get; set; }
		
		/// <summary>
		/// The score (0-100) for this rule group, which indicates how much better a page could be in that category (e.g. how much faster, or how much more usable, or how much more secure). A high score indicates little room for improvement, while a lower score indicates more room for improvement.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="score")]
		public System.Nullable<System.Int32> Score { get; set; }
	}
	
	public class PagespeedApiPagespeedResponseV4Version
	{
		
		/// <summary>
		/// The major version number of PageSpeed used to generate these results.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="major")]
		public System.Nullable<System.Int32> Major { get; set; }
		
		/// <summary>
		/// The minor version number of PageSpeed used to generate these results.
		/// </summary>
		[System.Runtime.Serialization.DataMember(Name="minor")]
		public System.Nullable<System.Int32> Minor { get; set; }
	}
	
	public partial class Misc
	{
		
		private System.Net.Http.HttpClient httpClient;
		
		private JsonSerializerOptions jsonSerializerSettings;
		
		public Misc(System.Net.Http.HttpClient httpClient, JsonSerializerOptions jsonSerializerSettings=null)
		{
			if (httpClient == null)
				throw new ArgumentNullException("Null HttpClient.", "httpClient");

			if (httpClient.BaseAddress == null)
				throw new ArgumentNullException("HttpClient has no BaseAddress", "httpClient");

			this.httpClient = httpClient;
			this.jsonSerializerSettings = jsonSerializerSettings;
		}
		
		/// <summary>
		/// Runs PageSpeed analysis on the page at the specified URL, and returns PageSpeed scores, a list of suggestions to make that page faster, and other information.
		/// Pagespeedonline_pagespeedapi_runpagespeed runPagespeed
		/// </summary>
		/// <param name="url">The URL to fetch and analyze</param>
		/// <param name="filter_third_party_resources">Indicates if third party resources should be filtered out before PageSpeed analysis.</param>
		/// <param name="locale">The locale used to localize formatted results</param>
		/// <param name="rule">A PageSpeed rule to run; if none are given, all rules are run</param>
		/// <param name="screenshot">Indicates if binary data containing a screenshot should be included</param>
		/// <param name="snapshots">Indicates if binary data containing snapshot images should be included</param>
		/// <param name="strategy">The analysis strategy (desktop or mobile) to use, and desktop is the default</param>
		/// <param name="utm_campaign">Campaign name for analytics.</param>
		/// <param name="utm_source">Campaign source for analytics.</param>
		/// <returns>Successful response</returns>
		public async Task Pagespeedonline_pagespeedapi_runpagespeedAsync(string url, bool filter_third_party_resources, string locale, string[] rule, bool screenshot, bool snapshots, Pagespeedonline_pagespeedapi_runpagespeedStrategy strategy, string utm_campaign, string utm_source, Action<System.Net.Http.Headers.HttpRequestHeaders> handleHeaders = null)
		{
			var requestUri = "runPagespeed?url=" + (url==null? "" : System.Uri.EscapeDataString(url))+"&filter_third_party_resources="+filter_third_party_resources+"&locale=" + (locale==null? "" : System.Uri.EscapeDataString(locale))+"&"+string.Join("&", rule.Select(z => $"rule={System.Uri.EscapeDataString(z.ToString())}"))+"&screenshot="+screenshot+"&snapshots="+snapshots+"&strategy=" + strategy+"&utm_campaign=" + (utm_campaign==null? "" : System.Uri.EscapeDataString(utm_campaign))+"&utm_source=" + (utm_source==null? "" : System.Uri.EscapeDataString(utm_source));
			using (var httpRequestMessage = new System.Net.Http.HttpRequestMessage(System.Net.Http.HttpMethod.Get, requestUri))
			{
			if (handleHeaders != null)
			{
				handleHeaders(httpRequestMessage.Headers);
			}

			var responseMessage = await httpClient.SendAsync(httpRequestMessage);
			try
			{
				responseMessage.EnsureSuccessStatusCodeEx();
			}
			finally
			{
				responseMessage.Dispose();
			}
			}
		}
	}
	
	public enum Pagespeedonline_pagespeedapi_runpagespeedStrategy
	{
		
		[System.Runtime.Serialization.EnumMemberAttribute()]
		desktop = 0,
		
		[System.Runtime.Serialization.EnumMemberAttribute()]
		mobile = 1,
	}
}

namespace Fonlow.Net.Http
{
	using System.Net.Http;

	public class WebApiRequestException : HttpRequestException
	{
		public new System.Net.HttpStatusCode StatusCode { get; private set; }

		public string Response { get; private set; }

		public System.Net.Http.Headers.HttpResponseHeaders Headers { get; private set; }

		public System.Net.Http.Headers.MediaTypeHeaderValue ContentType { get; private set; }

		public WebApiRequestException(string message, System.Net.HttpStatusCode statusCode, string response, System.Net.Http.Headers.HttpResponseHeaders headers, System.Net.Http.Headers.MediaTypeHeaderValue contentType) : base(message)
		{
			StatusCode = statusCode;
			Response = response;
			Headers = headers;
			ContentType = contentType;
		}
	}

	public static class ResponseMessageExtensions
	{
		public static void EnsureSuccessStatusCodeEx(this HttpResponseMessage responseMessage)
		{
			if (!responseMessage.IsSuccessStatusCode)
			{
				var responseText = responseMessage.Content.ReadAsStringAsync().Result;
				var contentType = responseMessage.Content.Headers.ContentType;
				throw new WebApiRequestException(responseMessage.ReasonPhrase, responseMessage.StatusCode, responseText, responseMessage.Headers, contentType);
			}
		}
	}
}
